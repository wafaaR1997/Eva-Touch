function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function initHotjar(){var e,t,n,o,r,i;e=window,t=document,n="//static.hotjar.com/c/hotjar-",o=".js?sv=",e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:171201,hjsv:5},r=t.getElementsByTagName("head")[0],(i=t.createElement("script")).async=1,i.src=n+e._hjSettings.hjid+o+e._hjSettings.hjsv,r.appendChild(i)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){"use strict";function X(e,t,n,o,r,i){return{tag:e,key:t,attrs:n,children:o,text:r,dom:i,domSize:undefined,state:undefined,_state:undefined,events:undefined,instance:undefined,skip:!1}}function s(e){for(var t in e)if(f.call(e,t))return!1;return!0}function l(e){for(var t,n="div",o=[],r={};t=u.exec(e);){var i=t[1],a=t[2];if(""===i&&""!==a)n=a;else if("#"===i)r.id=a;else if("."===i)o.push(a);else if("["===t[3][0]){var l=t[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?o.push(l):r[t[4]]=""===l?l:l||!0}}return 0<o.length&&(r.className=o.join(" ")),d[e]={tag:n,attrs:r}}function c(e,t,n){var o,r,i=!1,a=t.className||t["class"];if(!s(e.attrs)&&!s(t)){var l={};for(var c in t)f.call(t,c)&&(l[c]=t[c]);t=l}for(var c in e.attrs)f.call(e.attrs,c)&&(t[c]=e.attrs[c]);for(var c in a!==undefined&&(t["class"]!==undefined&&(t["class"]=undefined,t.className=a),null!=e.attrs.className&&(t.className=e.attrs.className+" "+a)),t)if(f.call(t,c)&&"key"!==c){i=!0;break}return Array.isArray(n)&&1===n.length&&null!=n[0]&&"#"===n[0].tag?r=n[0].children:o=n,X(e.tag,t.key,i?t:undefined,o,r)}function e(e,t){var n,o=t,r=2;if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");if("string"==typeof e)var i=d[e]||l(e);if(null==o?o={}:("object"!=typeof o||null!=o.tag||Array.isArray(o))&&(o={},r=1),arguments.length===r+1)n=arguments[r],Array.isArray(n)||(n=[n]);else for(n=[];r<arguments.length;)n.push(arguments[r++]);var a=X.normalizeChildren(n);return"string"==typeof e?c(i,o,a):X(e,o.key,o,a)}function a(t){var n=16,o=0,r=null,i="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var e=Date.now();0===o||n<=e-o?(o=e,t()):null===r&&(r=i(function(){r=null,t(),o=Date.now()},n-(e-o)))}}X.normalize=function(e){return Array.isArray(e)?X("[",undefined,undefined,X.normalizeChildren(e),undefined,undefined):null!=e&&"object"!=typeof e?X("#",undefined,undefined,!1===e?"":e,undefined,undefined):e},X.normalizeChildren=function(e){for(var t=0;t<e.length;t++)e[t]=X.normalize(e[t]);return e};var u=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,d={},f={}.hasOwnProperty;e.trust=function(e){return null==e&&(e=""),X("<",undefined,undefined,e,undefined,undefined)},e.fragment=function(e,t){return X("[",e.key,e,X.normalizeChildren(t),undefined,undefined)};var t=e;if((m=function(e){function t(r,i){return function t(n){var e;try{if(!i||null==n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof(e=n.then))f(function(){i||0!==r.length||console.error("Possible unhandled promise rejection:",n);for(var e=0;e<r.length;e++)r[e](n);c.length=0,s.length=0,d.state=i,d.retry=function(){t(n)}});else{if(n===l)throw new TypeError("Promise can't be resolved w/ itself");a(e.bind(n))}}catch(o){u(o)}}}function a(e){function t(t){return function(e){0<n++||t(e)}}var n=0,o=t(u);try{e(t(i),o)}catch(r){o(r)}}if(!(this instanceof m))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var l=this,c=[],s=[],i=t(c,!0),u=t(s,!1),d=l._instance={resolvers:c,rejectors:s},f="function"==typeof setImmediate?setImmediate:setTimeout;a(e)}).prototype.then=function(e,t){function n(n,e,o,t){e.push(function(e){if("function"!=typeof n)o(e);else try{r(n(e))}catch(t){i&&i(t)}}),"function"==typeof a.retry&&t===a.state&&a.retry()}var r,i,a=this._instance,o=new m(function(e,t){r=e,i=t});return n(e,a.resolvers,r,!0),n(t,a.rejectors,i,!1),o},m.prototype["catch"]=function(e){return this.then(null,e)},m.resolve=function(t){return t instanceof m?t:new m(function(e){e(t)})},m.reject=function(n){return new m(function(e,t){t(n)})},m.all=function(l){return new m(function(n,o){var r=l.length,i=0,a=[];if(0===l.length)n([]);else for(var e=0;e<l.length;e++)!function(t){function e(e){i++,a[t]=e,i===r&&n(a)}null==l[t]||"object"!=typeof l[t]&&"function"!=typeof l[t]||"function"!=typeof l[t].then?e(l[t]):l[t].then(e,o)}(e)})},m.race=function(o){return new m(function(e,t){for(var n=0;n<o.length;n++)o[n].then(e,t)})},"undefined"!=typeof window){"undefined"==typeof window.Promise&&(window.Promise=m);var m=window.Promise}else if("undefined"!=typeof global){"undefined"==typeof global.Promise&&(global.Promise=m);m=global.Promise}var h=function(e){function o(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)o(e+"["+n+"]",t[n]);else if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)o(e+"["+n+"]",t[n]);else r.push(encodeURIComponent(e)+(null!=t&&""!==t?"="+encodeURIComponent(t):""))}if("[object Object]"!==Object.prototype.toString.call(e))return"";var r=[];for(var t in e)o(t,e[t]);return r.join("&")},v=new RegExp("^file://","i"),n=function(s,o){function e(e){l=e}function i(){function r(){0==--i&&"function"==typeof l&&l()}var i=0;return function t(n){var o=n.then;return n.then=function(){i++;var e=o.apply(n,arguments);return e.then(r,function(e){if(r(),0===i)throw e}),t(e)},n}}function a(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function t(c,e){var t=i();c=a(c,e);var n=new o(function(r,i){null==c.method&&(c.method="GET"),c.method=c.method.toUpperCase();var e="GET"!==c.method&&"TRACE"!==c.method&&("boolean"!=typeof c.useBody||c.useBody);"function"!=typeof c.serialize&&(c.serialize="undefined"!=typeof FormData&&c.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof c.deserialize&&(c.deserialize=f),"function"!=typeof c.extract&&(c.extract=m),c.url=u(c.url,c.data),e?c.data=c.serialize(c.data):c.url=d(c.url,c.data);var a=new s.XMLHttpRequest,l=!1,t=a.abort;for(var n in a.abort=function(){l=!0,t.call(a)},a.open(c.method,c.url,"boolean"!=typeof c.async||c.async,"string"==typeof c.user?c.user:undefined,"string"==typeof c.password?c.password:undefined),c.serialize!==JSON.stringify||!e||c.headers&&c.headers.hasOwnProperty("Content-Type")||a.setRequestHeader("Content-Type","application/json; charset=utf-8"),c.deserialize!==f||c.headers&&c.headers.hasOwnProperty("Accept")||a.setRequestHeader("Accept","application/json, text/*"),c.withCredentials&&(a.withCredentials=c.withCredentials),c.headers)({}).hasOwnProperty.call(c.headers,n)&&a.setRequestHeader(n,c.headers[n]);"function"==typeof c.config&&(a=c.config(a,c)||a),a.onreadystatechange=function(){if(!l&&4===a.readyState)try{var e=c.extract!==m?c.extract(a,c):c.deserialize(c.extract(a,c));if(200<=a.status&&a.status<300||304===a.status||v.test(c.url))r(p(c.type,e));else{var t=new Error(a.responseText);for(var n in e)t[n]=e[n];i(t)}}catch(o){i(o)}},e&&null!=c.data?a.send(c.data):a.send()});return!0===c.background?n:t(n)}function n(r,e){var t=i();r=a(r,e);var n=new o(function(t,e){var n=r.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+c++,o=s.document.createElement("script");s[n]=function(e){o.parentNode.removeChild(o),t(p(r.type,e)),delete s[n]},o.onerror=function(){o.parentNode.removeChild(o),e(new Error("JSONP request failed")),delete s[n]},null==r.data&&(r.data={}),r.url=u(r.url,r.data),r.data[r.callbackKey||"callback"]=n,o.src=d(r.url,r.data),s.document.documentElement.appendChild(o)});return!0===r.background?n:t(n)}function u(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],o=0;o<n.length;o++){var r=n[o].slice(1);null!=t[r]&&(e=e.replace(n[o],t[r]))}return e}function d(e,t){var n=h(t);""!==n&&(e+=(e.indexOf("?")<0?"?":"&")+n);return e}function f(e){try{return""!==e?JSON.parse(e):null}catch(t){throw new Error(e)}}function m(e){return e.responseText}function p(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}var l,c=0;return{request:t,jsonp:n,setCompletionCallback:e}}(window,m),p=function(e){function t(e){return W=e}function u(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function S(e,t,n,o,r,i,a){for(var l=n;l<o;l++){var c=t[l];null!=c&&b(e,c,r,a,i)}}function b(e,t,n,o,r){var i=t.tag;if("string"!=typeof i)return f(e,t,n,o,r);switch(t.state={},null!=t.attrs&&B(t.attrs,t,n),i){case"#":return a(e,t,r);case"<":return l(e,t,r);case"[":return c(e,t,n,o,r);default:return s(e,t,n,o,r)}}function a(e,t,n){return t.dom=Y.createTextNode(t.children),C(e,t.dom,n),t.dom}function l(e,t,n){var o={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(t.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",r=Y.createElement(o);r.innerHTML=t.children,t.dom=r.firstChild,t.domSize=r.childNodes.length;for(var i,a=Y.createDocumentFragment();i=r.firstChild;)a.appendChild(i);return C(e,a,n),a}function c(e,t,n,o,r){var i=Y.createDocumentFragment();if(null!=t.children){var a=t.children;S(i,a,0,a.length,n,null,o)}return t.dom=i.firstChild,t.domSize=i.childNodes.length,C(e,i,r),i}function s(e,t,n,o,r){var i=t.tag,a=t.attrs,l=a&&a.is,c=(o=u(t)||o)?l?Y.createElementNS(o,i,{is:l}):Y.createElementNS(o,i):l?Y.createElement(i,{is:l}):Y.createElement(i);if(t.dom=c,null!=a&&O(t,a,o),C(e,c,r),null!=t.attrs&&null!=t.attrs.contenteditable)w(t);else if(null!=t.text&&(""!==t.text?c.textContent=t.text:t.children=[X("#",undefined,undefined,t.text,undefined,undefined)]),null!=t.children){var s=t.children;S(c,s,0,s.length,n,null,o),U(t)}return c}function d(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return J;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return J;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(e._state=e.state,null!=e.attrs&&B(e.attrs,e,t),B(e._state,e,t),e.instance=X.normalize(e._state.view.call(e.state,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}function f(e,t,n,o,r){if(d(t,n),null!=t.instance){var i=b(e,t.instance,n,o,r);return t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0,C(e,i,r),i}return t.domSize=0,J}function m(e,t,n,o,r,i,a){if(t!==n&&(null!=t||null!=n))if(null==t)S(e,n,0,n.length,r,i,a);else if(null==n)I(t,0,t.length,n);else{if(t.length===n.length){for(var l=!1,c=0;c<n.length;c++)if(null!=n[c]&&null!=t[c]){l=null==n[c].key&&null==t[c].key;break}if(l){for(c=0;c<t.length;c++)t[c]!==n[c]&&(null==t[c]&&null!=n[c]?b(e,n[c],r,a,E(t,c+1,i)):null==n[c]?I(t,c,c+1,n):L(e,t[c],n[c],r,E(t,c+1,i),o,a));return}}if(o=o||T(t,n)){var s=t.pool;t=t.concat(t.pool)}for(var u,d=0,f=0,m=t.length-1,p=n.length-1;d<=m&&f<=p;){if((v=t[d])!==(g=n[f])||o)if(null==v)d++;else if(null==g)f++;else if(v.key===g.key){var h=null!=s&&d>=t.length-s.length||null==s&&o;f++,L(e,v,g,r,E(t,++d,i),h,a),o&&v.tag===g.tag&&C(e,A(v),i)}else{if((v=t[m])!==g||o)if(null==v)m--;else if(null==g)f++;else{if(v.key!==g.key)break;h=null!=s&&m>=t.length-s.length||null==s&&o;L(e,v,g,r,E(t,m+1,i),h,a),(o||f<p)&&C(e,A(v),E(t,d,i)),m--,f++}else m--,f++}else d++,f++}for(;d<=m&&f<=p;){var v,g;if((v=t[m])!==(g=n[p])||o)if(null==v)m--;else if(null==g)p--;else if(v.key===g.key){h=null!=s&&m>=t.length-s.length||null==s&&o;L(e,v,g,r,E(t,m+1,i),h,a),o&&v.tag===g.tag&&C(e,A(v),i),null!=v.dom&&(i=v.dom),m--,p--}else{if(u||(u=_(t,m)),null!=g){var y=u[g.key];if(null!=y){var w=t[y];h=null!=s&&y>=t.length-s.length||null==s&&o;L(e,w,g,r,E(t,m+1,i),o,a),C(e,A(w),i),t[y].skip=!0,null!=w.dom&&(i=w.dom)}else{i=b(e,g,r,a,i)}}p--}else m--,p--;if(p<f)break}S(e,n,f,p+1,r,i,a),I(t,d,m+1,n)}}function L(e,t,n,o,r,i,a){var l=t.tag;if(l===n.tag){if(n.state=t.state,n._state=t._state,n.events=t.events,!i&&V(n,t))return;if("string"==typeof l)switch(null!=n.attrs&&(i?(n.state={},B(n.attrs,n,o)):F(n.attrs,n,o)),l){case"#":p(t,n);break;case"<":h(e,t,n,r);break;case"[":v(e,t,n,i,o,r,a);break;default:g(t,n,i,o,a)}else y(e,t,n,o,r,i,a)}else k(t,null),b(e,n,o,a,r)}function p(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}function h(e,t,n,o){t.children!==n.children?(A(t),l(e,n,o)):(n.dom=t.dom,n.domSize=t.domSize)}function v(e,t,n,o,r,i,a){m(e,t.children,n.children,o,r,i,a);var l=0,c=n.children;if((n.dom=null)!=c){for(var s=0;s<c.length;s++){var u=c[s];null!=u&&null!=u.dom&&(null==n.dom&&(n.dom=u.dom),l+=u.domSize||1)}1!==l&&(n.domSize=l)}}function g(e,t,n,o,r){var i=t.dom=e.dom;r=u(t)||r,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=undefined)),x(t,e.attrs,t.attrs,r),null!=t.attrs&&null!=t.attrs.contenteditable?w(t):null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[X("#",undefined,undefined,e.text,undefined,e.dom.firstChild)]),null!=t.text&&(t.children=[X("#",undefined,undefined,t.text,undefined,undefined)]),m(i,e.children,t.children,n,o,null,r))}function y(e,t,n,o,r,i,a){if(i)d(n,o);else{if(n.instance=X.normalize(n._state.view.call(n.state,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");null!=n.attrs&&F(n.attrs,n,o),F(n._state,n,o)}null!=n.instance?(null==t.instance?b(e,n.instance,o,a,r):L(e,t.instance,n.instance,o,r,i,a),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(k(t.instance,null),n.dom=undefined,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}function T(e,t){if(null!=e.pool&&Math.abs(e.pool.length-t.length)<=Math.abs(e.length-t.length)){var n=e[0]&&e[0].children&&e[0].children.length||0,o=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0,r=t[0]&&t[0].children&&t[0].children.length||0;if(Math.abs(o-r)<=Math.abs(n-r))return!0}return!1}function _(e,t){var n={},o=0;for(o=0;o<t;o++){var r=e[o];if(null!=r){var i=r.key;null!=i&&(n[i]=o)}}return n}function A(e){var t=e.domSize;if(null!=t||null==e.dom){var n=Y.createDocumentFragment();if(0<t){for(var o=e.dom;--t;)n.appendChild(o.nextSibling);n.insertBefore(o,n.firstChild)}return n}return e.dom}function E(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function C(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function w(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function I(e,t,n,o){for(var r=t;r<n;r++){var i=e[r];null!=i&&(i.skip?i.skip=!1:k(i,o))}}function k(n,o){function e(){if(++i===r&&(q(n),n.dom)){var e=n.domSize||1;if(1<e)for(var t=n.dom;--e;)N(t.nextSibling);N(n.dom),null==o||null!=n.domSize||z(n.attrs)||"string"!=typeof n.tag||(o.pool?o.pool.push(n):o.pool=[n])}}var t,r=1,i=0;n.attrs&&"function"==typeof n.attrs.onbeforeremove&&(null!=(t=n.attrs.onbeforeremove.call(n.state,n))&&"function"==typeof t.then&&(r++,t.then(e,e)));"string"!=typeof n.tag&&"function"==typeof n._state.onbeforeremove&&(null!=(t=n._state.onbeforeremove.call(n.state,n))&&"function"==typeof t.then&&(r++,t.then(e,e)));e()}function N(e){var t=e.parentNode;null!=t&&t.removeChild(e)}function q(e){if(e.attrs&&"function"==typeof e.attrs.onremove&&e.attrs.onremove.call(e.state,e),"string"!=typeof e.tag)"function"==typeof e._state.onremove&&e._state.onremove.call(e.state,e),null!=e.instance&&q(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var o=t[n];null!=o&&q(o)}}}function O(e,t,n){for(var o in t)i(e,o,null,t[o],n)}function i(e,t,n,o,r){var i=e.dom;if("key"!==t&&"is"!==t&&(n!==o||R(e,t)||"object"==typeof o)&&void 0!==o&&!j(t)){var a=t.indexOf(":");if(-1<a&&"xlink"===t.substr(0,a))i.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(a+1),o);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof o)D(e,t,o);else if("style"===t)H(i,n,o);else if(t in i&&!P(t)&&r===undefined&&!M(e)){if("value"===t){var l=""+o;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===l&&e.dom===Y.activeElement)return;if("select"===e.tag)if(null===o){if(-1===e.dom.selectedIndex&&e.dom===Y.activeElement)return}else if(null!==n&&e.dom.value===l&&e.dom===Y.activeElement)return;if("option"===e.tag&&null!=n&&e.dom.value===l)return}if("input"===e.tag&&"type"===t)return void i.setAttribute(t,o);i[t]=o}else"boolean"==typeof o?o?i.setAttribute(t,""):i.removeAttribute(t):i.setAttribute("className"===t?"class":t,o)}}function U(e){var t=e.attrs;"select"===e.tag&&null!=t&&("value"in t&&i(e,"value",null,t.value,undefined),"selectedIndex"in t&&i(e,"selectedIndex",null,t.selectedIndex,undefined))}function x(e,t,n,o){if(null!=n)for(var r in n)i(e,r,t&&t[r],n[r],o);if(null!=t)for(var r in t)null!=n&&r in n||("className"===r&&(r="class"),"o"!==r[0]||"n"!==r[1]||j(r)?"key"!==r&&e.dom.removeAttribute(r):D(e,r,undefined))}function R(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===Y.activeElement}function j(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function P(e){return"href"===e||"list"===e||"form"===e||"width"===e||"height"===e}function M(e){return e.attrs.is||-1<e.tag.indexOf("-")}function z(e){return null!=e&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove)}function H(e,t,n){if(t===n&&(e.style.cssText="",t=null),null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else{for(var o in"string"==typeof t&&(e.style.cssText=""),n)e.style[o]=n[o];if(null!=t&&"string"!=typeof t)for(var o in t)o in n||(e.style[o]="")}}function D(e,t,n){var o=e.dom,r="function"!=typeof W?n:function(e){var t=n.call(o,e);return W.call(o,e),t};if(t in o)o[t]="function"==typeof n?r:null;else{var i=t.slice(2);if(e.events===undefined&&(e.events={}),e.events[t]===r)return;null!=e.events[t]&&o.removeEventListener(i,e.events[t],!1),"function"==typeof n&&(e.events[t]=r,o.addEventListener(i,e.events[t],!1))}}function B(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function F(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}function V(e,t){var n,o;return null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=e.attrs.onbeforeupdate.call(e.state,e,t)),"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeupdate&&(o=e._state.onbeforeupdate.call(e.state,e,t)),!(n===undefined&&o===undefined||n||o)&&(e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0)}function n(e,t){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var n=[],o=Y.activeElement,r=e.namespaceURI;null==e.vnodes&&(e.textContent=""),Array.isArray(t)||(t=[t]),m(e,e.vnodes,X.normalizeChildren(t),!1,n,null,"http://www.w3.org/1999/xhtml"===r?undefined:r),e.vnodes=t,null!=o&&Y.activeElement!==o&&o.focus();for(var i=0;i<n.length;i++)n[i]()}var W,Y=e.document,J=Y.createDocumentFragment(),o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};return{render:n,setEventCallback:t}},o=function(e){function t(e,t){n(e),i.push(e,a(t))}function n(e){var t=i.indexOf(e);-1<t&&i.splice(t,2)}function o(){for(var e=1;e<i.length;e+=2)i[e]()}var r=p(e);r.setEventCallback(function(e){!1===e.redraw?e.redraw=undefined:o()});var i=[];return{subscribe:t,unsubscribe:n,redraw:o,render:r.render}}(window);n.setCompletionCallback(o.redraw);var r=function(o){return function(e,t){if(null===t)return o.render(e,[]),void o.unsubscribe(e);if(null==t.view&&"function"!=typeof t)throw new Error("m.mount(element, component) expects a component, not a vnode");var n=function(){o.render(e,X(t))};o.subscribe(e,n),o.redraw()}};t.mount=r(o);var g=m,y=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},o={},r=0;r<t.length;r++){var i=t[r].split("="),a=decodeURIComponent(i[0]),l=2===i.length?decodeURIComponent(i[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var c=a.split(/\]\[?|\[/),s=n;-1<a.indexOf("[")&&c.pop();for(var u=0;u<c.length;u++){var d=c[u],f=c[u+1],m=""==f||!isNaN(parseInt(f,10)),p=u===c.length-1;if(""===d)null==o[a=c.slice(0,u).join()]&&(o[a]=0),d=o[a]++;null==s[d]&&(s[d]=p?l:m?[]:{}),s=s[d]}}return n},i=function(u){function e(e){var t=u.location[e].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===e&&"/"!==t[0]&&(t="/"+t),t}function t(e){return function(){null==n&&(n=o(function(){n=null,e()}))}}function d(e,t,n){var o=e.indexOf("?"),r=e.indexOf("#"),i=-1<o?o:-1<r?r:e.length;if(-1<o){var a=-1<r?r:e.length,l=y(e.slice(o+1,a));for(var c in l)t[c]=l[c]}if(-1<r){var s=y(e.slice(r+1));for(var c in s)n[c]=s[c]}return e.slice(0,i)}var n,f="function"==typeof u.history.pushState,o="function"==typeof setImmediate?setImmediate:setTimeout,m={prefix:"#!",getPath:function(){switch(m.prefix.charAt(0)){case"#":return e("hash").slice(m.prefix.length);case"?":return e("search").slice(m.prefix.length)+e("hash");default:return e("pathname").slice(m.prefix.length)+e("search")+e("hash")}},setPath:function(e,n,t){var o={},r={};if(e=d(e,o,r),null!=n){for(var i in n)o[i]=n[i];e=e.replace(/:([^\/]+)/g,function(e,t){return delete o[t],n[t]})}var a=h(o);a&&(e+="?"+a);var l=h(r);if(l&&(e+="#"+l),f){var c=t?t.state:null,s=t?t.title:null;u.onpopstate(),t&&t.replace?u.history.replaceState(c,s,m.prefix+e):u.history.pushState(c,s,m.prefix+e)}else u.location.href=m.prefix+e},defineRoutes:function(l,c,s){function e(){var o=m.getPath(),r={},e=d(o,r,r),t=u.history.state;if(null!=t)for(var n in t)r[n]=t[n];for(var i in l){var a=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(a.test(e))return void e.replace(a,function(){for(var e=i.match(/:[^\/]+/g)||[],t=[].slice.call(arguments,1,-2),n=0;n<e.length;n++)r[e[n].replace(/:|\./g,"")]=decodeURIComponent(t[n]);c(l[i],r,o,i)})}s(o,r)}f?u.onpopstate=t(e):"#"===m.prefix.charAt(0)&&(u.onhashchange=e),e()}};return m},w=function(e,o){var l,c,s,u,d,r=i(e),f=function(e){return e},n=function(e,t,n){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var i=function(){null!=l&&o.render(e,l(X(c,s.key,s)))},a=function(e){if(e===t)throw new Error("Could not resolve default route "+t);r.setPath(t,null,{replace:!0})};r.defineRoutes(n,function(t,n,o){var r=d=function(e,t){r===d&&(c=null==t||"function"!=typeof t.view&&"function"!=typeof t?"div":t,s=n,u=o,d=null,l=(e.render||f).bind(e),i())};t.view||"function"==typeof t?r({},t):t.onmatch?g.resolve(t.onmatch(n,o)).then(function(e){r(t,e)},a):r(t,"div")},a),o.subscribe(e,i)};return n.set=function(e,t,n){null!=d&&((n=n||{}).replace=!0),d=null,r.setPath(e,t,n)},n.get=function(){return u},n.prefix=function(e){r.prefix=e},n.link=function(e){e.dom.setAttribute("href",r.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var t=this.getAttribute("href");0===t.indexOf(r.prefix)&&(t=t.slice(r.prefix.length)),n.set(t,undefined,undefined)}}},n.param=function(e){return void 0!==s&&void 0!==e?s[e]:s},n};t.route=w(window,o),t.withAttr=function(t,n,o){return function(e){n.call(o||this,t in e.currentTarget?e.currentTarget[t]:e.currentTarget.getAttribute(t))}};var S=p(window);t.render=S.render,t.redraw=o.redraw,t.request=n.request,t.jsonp=n.jsonp,t.parseQueryString=y,t.buildQueryString=h,t.version="1.1.6",t.vnode=X,"undefined"!=typeof module?module.exports=t:window.m=t}();var LoadingSpinner={view:function(){return[m(".spinner",[m("div"),m("div"),m("div"),m("div")]),m(".ie-fallback","Loading\u2026")]}},ModalInitializer=function(t){function n(e){27==e.keyCode&&r()}function o(e){for(var t=e.target;t&&"body"!=t.tagName.toLowerCase();){if(UTIL.hasClass(t,"modal__content"))return;t=t.parentNode}t&&r()}function e(){if(!i(t.onOpen)||!1!==t.onOpen.apply(arguments,arguments)){var e=document.querySelector(t.selector);UTIL.addClass(document.body,"has-open-modal"),UTIL.addClass(e,"is-open"),document.addEventListener("keydown",n),document.addEventListener("click",o)}}function r(){if(!i(t.onClose)||!1!==t.onClose.apply(arguments)){var e=document.querySelector(t.selector);document.removeEventListener("keydown",n),document.removeEventListener("click",o),UTIL.removeClass(document.body,"has-open-modal"),UTIL.removeClass(e,"is-open")}}function i(e){return void 0!==e&&"function"==typeof e}return t=t||{},{open:e,close:r}},Analytics=function(){function e(){r(),t()}function t(){m=f||document.referrer,f=document.URL,i("page")}function n(e,t,n,o,r){i("track",{event:t||"",propertiesCategory:e||"",propertiesLabel:n||"",propertiesValue:o||""},r)}function o(){return p}function i(e,t,n){var o=l(e);t&&Object.keys(t).forEach(function(e){o[e]=t[e]});var r=Object.keys(o).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])}).join("&"),i=h+"?"+r;if("beacon"==n&&navigator.sendBeacon)navigator.sendBeacon(i);else{var a=new XMLHttpRequest;a.open("GET",i,!0),a.send()}}function l(e){var t=window.innerWidth||(document.documentElement||{}).clientWidth,n=window.innerHeight||(document.documentElement||{}).clientHeight,o=parseInt(1e9*Math.random());return{apiKey:v+t+document.title.length+document.URL.length+o,ui:o,anonymousId:p,type:e,userAgent:navigator.userAgent,pageReferrer:m,pageTitle:document.title,pageUrl:document.URL,screenDensity:window.devicePixelRatio,windowWidth:t,windowHeight:n,language:navigator.language||navigator.userLanguage}}function r(){!0===u()?(p=localStorage.getItem("aid"))||(p=a(),localStorage.setItem("aid",p)):(p=s("aid"))||c("aid",p=a(),3650)}function a(){return Math.random().toString(36).substring(2)}function c(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+t+o+"; path=/"}function s(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function u(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function d(){var e=m;if(!e)return null;for(var t=0;t<g.length;++t){var n=g[t],o=e.indexOf(n);if(0<o){var r=o+n.length,i=e.indexOf("/",r);return i<0&&(i=e.indexOf("?",r))<0&&(i=e.length),e.substring(r,i)}}return null}var f,m,p,h="https://cat.pexels.com/atu.css",v=762885251,g=["/search/","/de-de/suche/"];return e(),{page:t,track:n,getAnonymousId:o,getSearchQueryFromReferrer:d}}(),BuySellAds=function(){function e(){document.querySelector(".js-buysellads")&&t()}function o(){"undefined"!=typeof _bsa&&_bsa&&(bsa_script=document.getElementById("_bsa_srv-CKYDE2JI_0"),bsa_script&&bsa_script.parentNode.removeChild(bsa_script),_bsa.init("default","CKYDE2JI","placement:pexels",{target:"#photo-partner-box",image:"logo",default_text:"Partner Offer"}))}function t(){var e="__bsa_js__";if(document.getElementById(e))o();else{var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id=e,n.src="//m.servedby-buysellads.com/monetization.js",n.onload=o,t.parentNode.insertBefore(n,t)}}return UTIL.ready(e),{init:t}}(),FacebookPixel=function(){function e(){var e,t,n,o,r,i,a;e=window,t=document,n="script",o="https://connect.facebook.net/en_US/fbevents.js",e.fbq||(r=e.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},e._fbq||(e._fbq=r),(r.push=r).loaded=!0,r.version="2.0",r.queue=[],(i=t.createElement(n)).async=!0,i.src=o,(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,a)),fbq("init","722281101294022"),fbq("track","PageView")}function t(e,t){"CompleteRegistration"==e?fbq("track",e,t):fbq("trackCustom",e,t)}return UTIL.ready(e),{track:t}}();window.pexelsFacebookPixelOnload!==undefined&&window.pexelsFacebookPixelOnload(),Track=function(){function e(e,t,n,o,r){Analytics.track(e,t,n,o,r),ga("send","event",{eventCategory:e,eventAction:t,eventLabel:n,eventValue:o,transport:r}),"download"==e?FacebookPixel.track(e):"photo"==e&&"submitted"==t?FacebookPixel.track("PhotosUploaded",{count:o}):"user"==e&&"sign-up"==t&&FacebookPixel.track("CompleteRegistration")}function t(){Analytics.page(),ga("send","pageview",location.pathname),fbq("track","PageView")}if("undefined"!=typeof Track&&Track.eventList){var n=!0,o=!1,r=undefined;try{for(var i,a=Track.eventList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e.apply(undefined,_toConsumableArray(l))}}catch(c){o=!0,r=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw r}}}return{page:t,event:e}}();var TrackLinks=function(){function e(){t(document.querySelectorAll("[data-track-action]")),o(".carbon-ad, .carbon-ad-in-photos")}function t(e){Array.prototype.forEach.call(e,function(e){e.addEventListener("click",n)})}function n(e){for(var t=e.target,n=0;n<4&&null==t.getAttribute("data-track-label");n++)t=t.parentNode;Track.event("track-click",t.getAttribute("data-track-action"),t.getAttribute("data-track-label"),t.getAttribute("data-track-value"),"beacon")}function o(e){(a=document.querySelector(e))&&a.addEventListener("DOMSubtreeModified",r)}function r(){a.removeEventListener("DOMSubtreeModified",r);var e=a.querySelector(".carbon-img"),t=a.querySelector(".carbon-text");e&&e&&(e.addEventListener("click",i),t.addEventListener("click",i))}function i(){Track.event("track-click","carbon","carbon")}return UTIL.ready(e),{bindEvents:t,carbonClicks:o};var a}(),CarbonAds=function(){function e(e){TrackLinks.carbonClicks(".js-photo-modal .carbon-ad"),null!=window._carbonads?n(e):i||t()}function t(){var e,t,n,o,r;e=document,t="script",n="__carbon_js__",r=e.getElementsByTagName(t)[0],e.getElementById(n)||((o=e.createElement(t)).id=n,o.async=1,o.src="//cdn.carbonads.com/carbon.js?serve=CKYDE2JL&placement=pexelscom",r.parentNode.insertBefore(o,r)),i=!0}function n(e){e&&window._carbonads.reload(e)}var i=!1;return{init:e}}();!function(){function e(){var e=document.querySelectorAll(".js-click-dropdown");Array.prototype.forEach.call(e,function(e){new t(e)})}function t(t){function e(e){r?o(e):n(e)}function n(){UTIL.addClass(t,"click-dropdown--open"),r=!0,window.setTimeout(function(){document.addEventListener("click",o)},0)}function o(e){e&&e.target&&e.target.matches(".js-click-dropdown > div *")||(UTIL.removeClass(t,"click-dropdown--open"),r=!1,document.removeEventListener("click",o))}var r=!1;t.addEventListener("click",e)}UTIL.ready(e)}();var FormSpamProtections=function(){function e(){var e=document.querySelectorAll("[data-action]");Array.prototype.forEach.call(e,function(e){e.setAttribute("action",e.getAttribute("data-action"))})}return UTIL.ready(e),{init:e}}(),SignUpModal=function(){function e(e){var t=document.querySelector(a);if(!i){var n=t.getAttribute("data-sign-up-path");e&&(n+="?"+e),UTIL.getRequest(n,o,r)}}function t(){MobileAppBanner.show("sign-up-close")}function o(e){document.querySelector(a+" .modal__content").innerHTML=e,i=!0,FormSpamProtections.init()}function r(){}var i=!1,a=".js-sign-up-modal";return ModalInitializer({selector:a,onOpen:e,onClose:t})}(),CollectionPhotosListStore=function(){function e(){document.addEventListener("new-photos",t),t()}function t(){if(UTIL.isSignedIn())for(var e=l(),t=0;t<e.length;t++){var n=document.querySelectorAll(".js-collect-"+e[t]);Array.prototype.forEach.call(n,i)}}function i(e){e&&!UTIL.hasClass(e,r)&&(UTIL.addClass(e,r),UTIL.addClass(e.querySelector("svg"),"icon-check"),UTIL.removeClass(e.querySelector("svg"),"icon-plus"),e.querySelector("svg use").href.baseVal="#iconCheck",UTIL.hasClass(e,c)&&e.querySelector("svg").setAttribute("viewBox",s))}function a(e){if(e){var t=UTIL.hasClass(e,c);UTIL.removeClass(e,r),UTIL.addClass(e.querySelector("svg"),"icon-plus"),UTIL.removeClass(e.querySelector("svg"),"icon-check"),e.querySelector("svg use").href.baseVal=t?"#iconCirclePlus":"#iconPlus",t&&e.querySelector("svg").setAttribute("viewBox",u)}}function n(e,t){t=parseInt(t,10);var n=l(),o=n.indexOf(t),r=document.querySelector(".js-collect-"+t);"added"===e?(-1===o&&n.push(t),i(r)):"removed"===e&&(n.splice(o,1),a(r)),localStorage.collected=JSON.stringify(n)}function l(){var e=localStorage.collected,t=new Date(localStorage.collected_expire_at);return!e||t<new Date?(o(),[]):JSON.parse(e)}function o(){var e=new Date;e.setHours(e.getHours()+2),localStorage.collected_expire_at=e,m.request({method:"GET",url:"/collections/photos/",headers:{"X-CSRF-Token":UTIL.getCsrfToken()},withCredentials:!0}).then(function(e){e.not_signedin?Logout.logout():(localStorage.collected=JSON.stringify(e),t())})}var r="btn-like--active",c="btn-like--large",s="0 0 30 30",u="0 0 16 16";return UTIL.ready(e),{change:n}}(),CollectionStore=function(){function n(){return{"X-CSRF-Token":UTIL.getCsrfToken()}}function e(){null===h.list&&m.request({method:"GET",url:"/me/collections/",headers:n(),withCredentials:!0}).then(r)["catch"](o)}function o(){alert("Error: Please reload the page and try to collect the photo again. If it still doesn't work please contact: info@pexels.com")}function t(){return h}function r(e){e&&(h={list:e.map(function(e){return e.id}),byId:e.reduce(function(e,t){return e[t.id]=t,e},{})})}function i(e){if(e&&e.id){var t=e.id;Array.isArray(h.list)?-1===h.list.indexOf(t)&&h.list.unshift(t):h.list=[t],h.byId[t]=e,a()}}function a(){var e=!1;for(var t in g)c(t)&&(e=!0);CollectionPhotosListStore.change(e?"added":"removed",v)}function l(e){v!==e&&"string"==typeof e&&(g={},s(v=e))}function c(e){return Boolean(g[e])}function s(e){m.request({url:"/photo/:id/collections/",data:{id:e},headers:n(),withCredentials:!0}).then(function(e){Array.isArray(e)&&e.reduce(function(e,t){return e[t]=!0,e},g)})["catch"](o)}function u(e){g[e]=!0,m.request({method:"POST",url:"/collections/:id/photos/",data:{id:e,photo_id:v},headers:n(),withCredentials:!0}).then(i)["catch"](o),p("addToCollection")}function d(e){g[e]=!1,m.request({method:"DELETE",url:"/collections/:id/photos/",data:{id:e,photo_id:v},headers:n(),withCredentials:!0}).then(i)["catch"](o),p("removeFromCollection")}function f(e){var t=m.request({method:"POST",url:"/collections/",data:{title:e},headers:n(),withCredentials:!0});return t.then(function(e){i(e),u(e.id)})["catch"](o),p("createCollection"),t}function p(e){Track.event("collect",e,v)}var h={list:null,byId:{}},v=null,g={};return{data:t,load:e,isActive:c,setPhoto:l,addToCollection:u,removeFromCollection:d,createCollection:f}}(),CollectionModal=function(){function e(){m.mount(document.querySelector(r),i)}function t(){m.mount(document.querySelector(r),null),MobileAppBanner.show("collect")}var n=UTIL.getCookie("locale"),o=".js-collection-modal",r=o+" .modal__content",a="en-US"===n?"":"/"+n.toLowerCase(),l={view:function(e){var t=e.attrs,n=t.item,o=CollectionStore.isActive(n.id),r=(n.preview_images||[])[0];return m("li.l-lg-6",{key:n.id},[m(".collection.collection--small",{role:"button","data-collection-id":n.id,className:[o?"collection--active":"",t.hovered?"collection--hover":""].join(" "),onmouseenter:o&&m.withAttr("data-collection-id",t.onEnter),onmouseleave:t.onLeave,onclick:m.withAttr("data-collection-id",o?CollectionStore.removeFromCollection:CollectionStore.addToCollection)},[o&&[m("svg.icon-check.collection__icon",{viewBox:"0 0 24 24"},m("use",{"xlink:href":"#iconCheck"})),m("svg.icon-check.collection__icon.collection__icon--remove",{viewBox:"0 0 15 15"},m("use",{"xlink:href":"#iconPlus"}))],void 0===r?m("svg.icon-camera.collection__img.collection__img--placeholder",{viewBox:"0 0 16 16"},m("use",{"xlink:href":"#iconCamera"})):m(".collection__img.o-clip.o-clip--cover",{style:{backgroundImage:"url("+r+")"}}),m(".collection__body.collection__gradient",m("span",n.title))])])}},i={hoveredItem:null,toggleHovered:function(e){this.hoveredItem=e},oninit:function(){CollectionStore.load()},view:function(t){var n=CollectionStore.data(),o=t.state.hoveredItem,r=t.state.toggleHovered.bind(t.state),i=t.state.toggleHovered.bind(t.state,null);return m(".collections",[m(CreateCollection,{className:"collections__create js-create-toggle"}),m("h4.collections__title",[i18n("collection_save")]),null===n.list?m(LoadingSpinner):m("ul.collections__list.l-row",0===n.list.length?m("li.l-lg-6",m(".collection.collection--small.collection--empty",{onclick:function(e){e.stopPropagation(),t.dom.querySelector(".js-create-toggle button").click()}},[m(".collection__body",i18n("collection_create"))])):n.list.map(function(e){var t=n.byId[e];return t?m(l,{item:t,hovered:o===e,onEnter:r,onLeave:i}):null})),m("p.collections__footer",[m("a",{href:a+"/me/collections/"},[i18n("collection_view")])])])}};return ModalInitializer({selector:o,onClose:t,onOpen:e})}();!function(){function e(){document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-collect");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n=t.getAttribute("data-photo-id");if(!UTIL.isSignedIn())return o("not-signedin",n),void SignUpModal.open("photo_id="+n);o("opened",n),CollectionStore.setPhoto(n),CollectionModal.open()}function o(e,t){Track.event("collect",e,t)}UTIL.ready(e)}();var CreateCollection={isWorking:!1,hasError:!1,isOpen:!1,title:"",parent:null,handler:null,oncreate:function(n){try{var o=n.dom.parentNode.parentNode,e=function(e){if(n.state.isOpen){for(var t=e.target;t!==o;){if(t===n.dom)return;t=t.parentNode}n.state.isOpen=!1,m.redraw()}};n.state.parent=o,n.state.handler=e,o.addEventListener("click",e)}catch(t){}},onbeforeremove:function(e){e.state.parent&&e.state.parent.removeEventListener("click",e.state.handler)},onupdate:function(e){if(e.state.isOpen){var t=e.dom.querySelector("input");t!==document.activeElement&&t.focus()}},view:function(e){var t=e.attrs,n=e.state,o=t.className||"";return m("div.click-dropdown",{className:n.isOpen?o+" click-dropdown--open":o},[m('button.btn-quiet.btn--sm[type="button"]',{onclick:function(e){e.preventDefault(),n.isOpen=!n.isOpen}},i18n("collection_create")),n.isOpen&&m(".click-dropdown__content.btn__dropdown",[m("form.form.form--padded.clearfix",{className:n.hasError?"field_with_errors":"",onsubmit:function(e){e.preventDefault(),n.isWorking||(n.title?(n.isWorking=!0,CollectionStore.createCollection(n.title).then(function(){n.isWorking=!1,n.hasError=!1,n.isOpen=!1,n.title=""})):n.hasError=!0)}},[m(".margin-bottom",[m("label.form__label",{"for":"collection_title"},i18n("collection_title")),m('input.form__input[type="text"]',{oninput:m.withAttr("value",function(e){n.title=e}),value:n.title,name:"collection_title",id:"collection_title"})]),m('button.btn-secondary.pull-right[type="submit"]',{className:n.isWorking?"disabled":"",disabled:n.isWorking},i18n("collection_create"))])])])}},CookieConsent=function(){function e(e){"de"==e&&(localStorage.getItem(o)!=r&&(UTIL.isSignedIn()?localStorage.setItem(o,r):t()))}function t(){UTIL.ready(function(){var e=document.querySelector(".js-cookie-consent");e.classList.remove("hidden"),e.querySelector("button").addEventListener("click",n)})}function n(){document.querySelector(".js-cookie-consent").classList.add("hidden"),localStorage.setItem(o,r)}var o="cookieconsent",r="2";return{setCountry:e}}(),CopyText=function(){function e(){var e=document.querySelector(".js-copy-button");e&&e.addEventListener("click",t)}function t(){document.querySelector(".js-copy-textarea").select();try{document.execCommand("copy")}catch(t){}var e=document.querySelector(".js-copy-success");UTIL.removeClass(e,"hidden")}return UTIL.ready(e),{init:e}}(),DownloadOverlay=function(){function e(){var e=document.querySelectorAll(".photo-modal__content"),t=document.querySelectorAll(".photo-modal__close"),n=e.length-1;UTIL.removeClass(e[n],"photo-modal__content--hidden"),t[n].addEventListener("click",function(){UTIL.addClass(e[n],"photo-modal__content--hidden")})}return{open:e}}(),PredictionsModal=function(){function init(){if(!UTIL.isSignedIn()&&!wasOpened&&680<window.innerWidth){wasOpened=!0;var locale=UTIL.getCookie("locale"),linkPrefix="en-US"===locale?"":"/"+locale.toLowerCase(),trackingId=Analytics.getAnonymousId(),path=linkPrefix+"/predictions/?tid="+trackingId,request=UTIL.scriptRequest(path);request.onload=function(){200==request.status&&(eval(request.responseText),track("show"))},request.send()}}function isLoaded(){var e=document.querySelector(".js-predictions-modal-close");e&&e.addEventListener("click",close)}function close(e){e.preventDefault(),track("close");var t=document.querySelector(".js-predictions-modal");UTIL.addClass(t,"hidden")}function track(e){Track.event("track-click","predictions-modal",e)}var wasOpened=!1;return{init:init,isLoaded:isLoaded}}();Download=function(){function e(){r=Analytics.getAnonymousId();var e=document.querySelectorAll(".js-download");e&&Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",t))})}function t(){n("click",this.getAttribute("data-id")),DownloadOverlay.open(),PredictionsModal.init(),MobileAppBanner.show("download")}function n(e,t){Track.event("download",e,t);var n=Analytics.getSearchQueryFromReferrer();o("/photo/td/",{photo_id:t,tracking_id:r,search_query:n})}function o(e,t){var n=new XMLHttpRequest,o=document.querySelector('meta[name="csrf-token"]').getAttribute("content");n.open("POST",e,!0),n.setRequestHeader("X-CSRF-Token",o),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}var r;return UTIL.ready(e),{init:e,track:n}}();var CustomDownload=function(){function e(){var e=document.getElementsByClassName("js-download-size-btn");Array.prototype.forEach.call(e,function(e){var t=e.nextElementSibling;if(t&&!t.getAttribute("data-initialized")){t.setAttribute("data-initialized","true");var n=t.querySelector(".custom-size__width");if(n){var o=t.querySelector(".custom-size__height"),r={customHeightInput:o,customWidthInput:n,customSizeRadio:t.querySelector("#custom-size__value"),dropdown:t};s(r),o.addEventListener("input",function(){l(r)}),n.addEventListener("input",function(){c(r)}),Array.prototype.forEach.call(t.getElementsByClassName("select-list__item"),function(e){e.addEventListener("click",i)}),t.querySelector(".custom-size__submit").addEventListener("click",function(e){a(e,this,r)})}}})}function i(){this.querySelector('input[type="radio"]').checked=!0,Array.prototype.forEach.call(document.getElementsByClassName("select-list__item"),function(e){UTIL.removeClass(e,"select-list--active")}),UTIL.addClass(this,"select-list--active")}function a(e,t,n){var o,r,i,a,l=n.customHeightInput,c=n.customWidthInput;if(n.customSizeRadio.checked){if(!("function"!=typeof c.checkValidity||c.checkValidity()&&l.checkValidity()))return;f(o=c.value,r=l.value),i=o+"x"+r}else{var s=(a=n.dropdown.querySelector('input[name="download-size"]:checked')).value.split("x");o=s[0],r=s[1],i=a.getAttribute("data-name")}if(e.preventDefault(),a&&null!==a.getAttribute("data-alt-url")&&"download"in document.createElement("a")&&-1===navigator.userAgent.search("Firefox")){var u=document.createElement("a");u.setAttribute("href",a.getAttribute("data-alt-url")),u.setAttribute("download",""),u.click()}else{var d=t.getAttribute("data-url")+"?dl&fit=crop&crop=entropy&w="+o+"&h="+r;window.location.href=d}Download.track(i,t.getAttribute("data-id")),DownloadOverlay.open()}function l(e){var t=e.customHeightInput.value,n=Math.round(t*e.customHeightInput.getAttribute("data-aspect-ratio"));e.customWidthInput.placeholder=n}function c(e){var t=e.customWidthInput.value,n=Math.round(t*e.customWidthInput.getAttribute("data-aspect-ratio"));e.customHeightInput.placeholder=n}function s(e){var t=JSON.parse(localStorage.getItem("customDownloadSize"));t&&(t.height||t.width)&&(e.customHeightInput.value=t.height,e.customWidthInput.value=t.width,l(e),c(e))}function f(e,t){var n={width:e,height:t};localStorage.setItem("customDownloadSize",JSON.stringify(n))}return UTIL.ready(e),{init:e}}();UTIL.ready(function(){var e=document.querySelectorAll(".rd__dropdown"),i="rd__dropdown--active",s="rd__dropdown--right",u=".rd__dropdown__container__content__pointer",d=".rd__button:first-child",a=500,l=150,c=function(e){var t=e.querySelector(u),n=e.querySelector(d),o=t.offsetWidth,r=n.offsetWidth,i=window.getComputedStyle(n),a=i.marginRight,l=i.marginLeft;l=parseInt(l,10),a=parseInt(a,10);var c=r/2-o/2;UTIL.hasClass(e,s)?t.style.right=c+a+"px":t.style.left=c+l+"px"};e.forEach(function(e){var t=undefined,n=undefined,o=e.querySelector(d),r=function(){clearTimeout(t),clearTimeout(n)};o&&o.addEventListener("click",function(){r(),UTIL.toggleClass(e,i)}),e.addEventListener("mouseenter",function(){r(),n=setTimeout(function(){UTIL.addClass(e,i),c(e)},l)}),e.addEventListener("mouseleave",function(){r(),t=setTimeout(function(){UTIL.removeClass(e,i)},a)})})});var Dropdown=function(){function e(){var e=document.getElementsByClassName("js-dropdown");e.length&&Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||new t(e)})}function t(e){function t(e){r||e.preventDefault(),clearTimeout(o),l(),UTIL.addClass(a,"open")}function n(){clearTimeout(o),o=window.setTimeout(function(){UTIL.removeClass(a,"open")},400)}var o,r="true"==e.getAttribute("data-is-clickable"),i=e.getAttribute("data-dropdown-selector")||e.getAttribute("href"),a=null!=e.nextElementSibling&&e.nextElementSibling.matches(i)?e.nextElementSibling:document.querySelector(i);e.addEventListener("mouseenter",t),e.addEventListener("click",t),a.addEventListener("mousemove",t),a.addEventListener("mouseleave",n),e.addEventListener("mouseleave",n),e.setAttribute("data-initialized","true")}function l(){var e=document.querySelectorAll(".btn__dropdown.open");Array.prototype.forEach.call(e,n)}function n(e){UTIL.removeClass(e,"open")}return UTIL.ready(e),{init:e}}(),FollowingActionHandler=function(){function e(){document.addEventListener("new-photos",t),document.addEventListener("new-users",t),t()}function t(){var e=document.querySelectorAll(".js-follow");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n,o,r=t.getAttribute("data-follow-track-label"),i=t.getAttribute("data-user-id");if(!UTIL.isSignedIn())return u("not-signedin",r),void SignUpModal.open("user_id="+i);UTIL.hasClass(t,d)?(n="/followers/follow/",o="DELETE",s(t),u("unfollow",r)):(n="/followers/follow/",o="POST",c(t),u("follow",r)),m.request({url:n+"?user_id="+i,method:o,background:!0,headers:{"X-CSRF-Token":UTIL.getCsrfToken()}}).then(a)["catch"](l)}function a(e){e.not_signedin?(SignUpModal.open(),Logout.logout()):FollowingStore.handleFollow(e.action,e.user_id)}function l(){alert("Error: Please reload the page and try to follow the user again. If it still doesn't work please contact: info@pexels.com")}function c(e){UTIL.addClass(e,d),UTIL.hasClass(e,i)?(r||(r=e.innerHTML),e.innerHTML="\u2713"):(r||(o=e.innerHTML),e.innerHTML=i18n("following"))}function s(e){UTIL.removeClass(e,d),UTIL.hasClass(e,i)?e.innerHTML=r:e.innerHTML=o}function u(e,t){Track.event("follow",e,t)}var o,r,d="btn-follow--active",i="btn-follow--tiny";return UTIL.ready(e),{activateFollowBtn:c}}(),FollowingStore=function(){function e(){document.addEventListener("new-photos",t),document.addEventListener("new-users",t),t()}function t(){if(UTIL.isSignedIn())for(var e=r(),t=0;t<e.length;t++){var n=document.querySelectorAll(".js-follow-"+e[t]);Array.prototype.forEach.call(n,FollowingActionHandler.activateFollowBtn)}}function n(e,t){var n=r();if("follow"==e)-1==n.indexOf(t)&&n.push(t);else if("unfollow"==e){var o=n.indexOf(t);n.splice(o,1)}localStorage.followings=JSON.stringify(n)}function r(){var e=localStorage.followings,t=new Date(localStorage.followings_expire_at);return!e||t<new Date?(o(),[]):JSON.parse(e)}function o(){UTIL.getRequest("/followers/followings/",i,a);var e=new Date;e.setHours(e.getHours()+2),localStorage.followings_expire_at=e}function i(e){JSON.parse(e).not_signedin?Logout.logout():(localStorage.followings=e,t())}function a(){}return UTIL.ready(e),{handleFollow:n}}();!function(){function init(){if(homeLinks=document.querySelectorAll(".js-home-link"),activeLink=document.querySelector("."+TAB_ACTIVE_CLASS),homeLinks&&activeLink){Array.prototype.forEach.call(homeLinks,function(e){e.addEventListener("click",changeTab)}),window.addEventListener("popstate",onBack),activeName=activeLink.getAttribute("data-name");var e=history.state||{};e.activeHomeTab=activeName,window.history.replaceState(e,document.title,document.URL)}}function onBack(){if(history.state&&history.state.activeHomeTab&&activeName!=history.state.activeHomeTab){var e=document.querySelector("."+history.state.activeHomeTab);e&&(activeName=e.getAttribute("data-name"),loadPhotos(e))}}function changeTab(e){if(clickWithKeyPressed(e))return!1;e.preventDefault(),activeName=e.target.getAttribute("data-name");history.state;window.history.pushState({activeHomeTab:activeName},document.title,e.target.getAttribute("href")),Track.page(),loadPhotos(e.target)}function loadPhotos(link){ENDLESS_SCROLLING.terminate(),document.querySelector(".photos").innerHTML="",document.querySelector(".js-pagination").innerHTML="",Array.prototype.forEach.call(homeLinks,function(e){UTIL.removeClass(e,TAB_ACTIVE_CLASS)}),UTIL.addClass(link,TAB_ACTIVE_CLASS),history&&history.state&&(history.state.pos=window.pageYOffset);var url=link.getAttribute("data-url")+"&format=js",request=UTIL.scriptRequest(url);request.onload=function(){200<=request.status&&request.status<400&&(eval(request.responseText),ENDLESS_SCROLLING.init())},request.send()}function clickWithKeyPressed(e){return e&&(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)}var homeLinks,activeLink,activeName,TAB_ACTIVE_CLASS="title-tabs__tab--active";UTIL.ready(init)}(),UTIL.ready(initHotjar);var LikeStore=function(){function e(){document.addEventListener("new-photos",t),t()}function t(){if(UTIL.isSignedIn())for(var e=r(),t=0;t<e.length;t++){var n=document.querySelectorAll(".js-like-"+e[t]);Array.prototype.forEach.call(n,function(e){UTIL.addClass(e,l),UTIL.addClass(e,c)})}}function n(e,t){var n=r();if("like"==e)-1==n.indexOf(t)&&n.push(t);else if("unlike"==e){var o=n.indexOf(t);n.splice(o,1)}localStorage.likes=JSON.stringify(n)}function r(){var e=localStorage.likes,t=new Date(localStorage.likes_expire_at);return!e||t<new Date?(o(),[]):JSON.parse(e)}function o(){UTIL.getRequest("/likes/",i,a);var e=new Date;e.setHours(e.getHours()+2),localStorage.likes_expire_at=e}function i(e){JSON.parse(e).not_signedin?Logout.logout():(localStorage.likes=e,t())}function a(){}var l="btn-like--active",c="btn-like--no-animations";return UTIL.ready(e),{handleLike:n}}();!function(){function e(){document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-like");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n,o,r=t.getAttribute("data-photo-id");if(!UTIL.isSignedIn())return l("not-signedin",r),void SignUpModal.open("photo_id="+r);UTIL.hasClass(t,c)?(n="/photo/PHOTO_ID/likes/",o="DELETE",UTIL.removeClass(t,s),UTIL.removeClass(t,c),l("unlike",r)):(n="/photo/PHOTO_ID/likes/",o="POST",UTIL.addClass(t,c),l("like",r)),m.request({url:n.replace("PHOTO_ID",r),method:o,background:!0,headers:{"X-CSRF-Token":UTIL.getCsrfToken()}}).then(i)["catch"](a)}function i(e){e.not_signedin?(SignUpModal.open(),Logout.logout()):LikeStore.handleLike(e.action,e.photo_id)}function a(){alert("Error: Please reload the page and try to like the photo again. If it still doesn't work please contact: info@pexels.com")}function l(e,t){Track.event("like",e,t)}var c="btn-like--active",s="btn-like--no-animations";UTIL.ready(e)}(),function(){function e(){(o=document.querySelector(".js-chart-container"))&&t(n)}function t(e){var t=window.location.pathname.replace(/\/$/,"")+"/image_view_chart",n=UTIL.scriptRequest(t);n.onload=function(){o.innerHTML=n.responseText,e()},n.send()}function n(){var e=document.querySelector(".js-chart-data");if(e){var t=e.getAttribute("data-title"),n=JSON.parse(e.getAttribute("data-labels")),o=JSON.parse(e.getAttribute("data-data")),r=document.getElementById("chart");new Chart(r,{type:"line",data:{labels:n,datasets:[{label:t,backgroundColor:"rgba(39, 174, 96, .3)",borderColor:"rgba(39, 174, 96, 1)",pointBackgroundColor:"#fff",data:o}]},options:{legend:{display:!1},tooltips:{xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{callback:function(e){return 1e6<=e?e/1e6+"M":1e3<=e?e/1e3+"k":e}}}]}}})}}var o;UTIL.ready(e)}();var MobileAppBanner=function(){function e(){document.querySelector('.navbar input[type="search"]').value.includes("wallpaper")&&setTimeout(function(){t("wallpaper")},6e3)}function t(e){var t=l();if(!t||d||580<window.outerWidth)return!1;s=e;var n=c();if(n[s]&&n[s].hideUntil&&new Date(n[s].hideUntil)>new Date)return!1;d=!0;var o="/mobile_banner/LANG/TYPE/OS/",r=UTIL.getLocale();o=o.replace("LANG",r).replace("OS",t).replace("TYPE",s);var i=UTIL.scriptRequest(o);return i.onload=function(){200==i.status&&(document.body.insertAdjacentHTML("beforeend",i.responseText),(u=document.querySelector(".js-mobile-app-banner")).querySelector(".js-mobile-app-banner-close").addEventListener("click",function(e){e.stopPropagation(),a()}),TrackLinks.bindEvents(u.querySelectorAll("a")))},i.send(),!0}function a(){if(d){UTIL.addClass(u,"hidden");var e=c();e[s]||(e[s]={});var t=new Date;t.setDate(t.getDate()+7),e[s].hideUntil=t,localStorage.setItem("mobile_banner_settings",JSON.stringify(e))}}function l(){var e=navigator.userAgent||navigator.vendor||window.opera;if(!/windows phone/i.test(e))return/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":void 0}function c(){return JSON.parse(localStorage.getItem("mobile_banner_settings"))||{}}var s,u,d=!1;return UTIL.ready(e),{show:t,hide:a}}(),_createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),Navbar=function(){function t(){var e=this;_classCallCheck(this,t),this.timeout=null,this.overlayOpenState=!1,this.SCROLL_THRESHOLD=100,this.transparencyClassWasRemoved=!1,this.OUTRO_ANIMATION_TIME=600,this.HERO_ELEMENT=document.querySelector(".hero"),this.NAVBAR_ELEMENT=document.querySelector(".navbar"),this.NAVBAR_TRANSPARENT_CLASSNAME="navbar--transparent",this.HAMBURGER_BUTTON=document.querySelector(".js-nav-hamburger-button"),this.OVERLAY_ELEMENT=document.querySelector(".js-navbar-mobile-overlay"),this.OVERLAY_ACTIVE_CLASS="navbar__overlay--active",this.OVERLAY_OUT_CLASS="navbar__overlay--out",this.HAMBURGER_BUTTON.addEventListener("click",function(){return e.toggleOverlay()}),window.addEventListener("scroll",function(){return e.onScroll()})}return _createClass(t,[{key:"onScroll",value:function(){this.overlayOpenState||this.HERO_ELEMENT&&(document.documentElement.scrollTop>this.SCROLL_THRESHOLD||document.body.scrollTop>this.SCROLL_THRESHOLD?UTIL.removeClass(this.NAVBAR_ELEMENT,this.NAVBAR_TRANSPARENT_CLASSNAME):UTIL.addClass(this.NAVBAR_ELEMENT,this.NAVBAR_TRANSPARENT_CLASSNAME))}},{key:"toggleOverlay",value:function(){this.overlayOpenState?this.closeOverlay():this.openOverlay(),this.overlayOpenState=!this.overlayOpenState}},{key:"openOverlay",value:function(){this.OVERLAY_ELEMENT.style.top=this.navbarHeight+"px",this.removeNavbarsTransparencyClassIfExists(),clearTimeout(this.timeout),UTIL.removeClass(this.OVERLAY_ELEMENT,this.OVERLAY_OUT_CLASS),UTIL.addClass(this.OVERLAY_ELEMENT,this.OVERLAY_ACTIVE_CLASS)}},{key:"closeOverlay",value:function(){var e=this;this.addNavbarsTransparencyClassIfNecessary(),clearTimeout(this.timeout),UTIL.addClass(this.OVERLAY_ELEMENT,this.OVERLAY_ACTIVE_CLASS),UTIL.addClass(this.OVERLAY_ELEMENT,this.OVERLAY_OUT_CLASS),this.timeout=setTimeout(function(){UTIL.removeClass(e.OVERLAY_ELEMENT,e.OVERLAY_ACTIVE_CLASS),UTIL.removeClass(e.OVERLAY_ELEMENT,e.OVERLAY_OUT_CLASS),e.OVERLAY_ELEMENT.style.top=undefined},this.OUTRO_ANIMATION_TIME)}},{key:"addNavbarsTransparencyClassIfNecessary",value:function(){this.transparencyClassWasRemoved&&(UTIL.addClass(this.NAVBAR_ELEMENT,this.NAVBAR_TRANSPARENT_CLASSNAME),this.transparencyClassWasRemoved=!1)}},{key:"removeNavbarsTransparencyClassIfExists",value:function(){UTIL.hasClass(this.NAVBAR_ELEMENT,this.NAVBAR_TRANSPARENT_CLASSNAME)?(this.transparencyClassWasRemoved=!0,UTIL.removeClass(this.NAVBAR_ELEMENT,this.NAVBAR_TRANSPARENT_CLASSNAME)):this.transparencyClassWasRemoved=!1}},{key:"navbarHeight",get:function(){return this.NAVBAR_ELEMENT.getBoundingClientRect().height}}]),t}();UTIL.ready(function(){return new Navbar});var Notifications=function(){function init(){UTIL.isSignedIn()&&(notificationsTriggerEl=document.querySelector(NOTIFICATIONS_TRIGGER_SELECTOR))&&(checkForNewNotifications(),notificationsTriggerEl.addEventListener("mouseenter",function(){notificationsScrollContainerEl=document.querySelector(NOTIFICATIONS_SCROLL_CONTAINER_SELECTOR),notificationsContentContainerEl=document.querySelector(NOTIFICATIONS_CONTENT_CONTAINER_SELECTOR),removeActiveStatusFromNotificationIcon(),loadNotifications(),notificationsScrollContainerEl.addEventListener("scroll",checkIfNearBottom),notificationsTriggerEl.removeEventListener("mouseenter",this)}))}function removeActiveStatusFromNotificationIcon(){var e=notificationsTriggerEl.querySelector(NOTIFICATION_ICON_SELECTOR);e&&UTIL.removeClass(e,NOTIFICATION_ICON_ACTIVE_CLASS)}function addActiveStatusToNotificationIcon(){var e=notificationsTriggerEl.querySelector(NOTIFICATION_ICON_SELECTOR);e&&UTIL.addClass(e,NOTIFICATION_ICON_ACTIVE_CLASS)}function loadNotifications(){if(!isLoading)if(isLastPage)notificationsScrollContainerEl.removeEventListener("scroll",checkIfNearBottom);else{isLoading=!0;var url=notificationsContentContainerEl.getAttribute("data-url");url+="?page="+page,seed&&(url+="&seed="+seed),lastSeenAt&&(url+="&last_seen_at="+lastSeenAt);var request=UTIL.scriptRequest(url);request.onload=function(){eval(request.responseText),page+=1,isLoading=!1,checkIfNearBottom()},request.send()}}function checkIfNearBottom(){var e=notificationsScrollContainerEl.scrollTop+notificationsScrollContainerEl.clientHeight;notificationsScrollContainerEl.scrollHeight<e+400&&loadNotifications()}function setLastPage(){isLastPage=!0}function setSeed(e){seed=e}function setLastSeenAt(e){lastSeenAt=e}function checkForNewNotifications(){window.setTimeout(checkForNewNotifications,6e5),UTIL.getRequest("/me/notifications/check/",function(e){!0===JSON.parse(e).has_new_notifications&&(addActiveStatusToNotificationIcon(),reset())},function(){})}function reset(){isLastPage=!1,page=1,seed=undefined,notificationsContentContainerEl&&(notificationsContentContainerEl.innerHTML="")}var NOTIFICATIONS_TRIGGER_SELECTOR=".js-notifications-trigger",NOTIFICATIONS_SCROLL_CONTAINER_SELECTOR=".js-notifications-scroll-container",NOTIFICATIONS_CONTENT_CONTAINER_SELECTOR=".js-notifications-content-container",NOTIFICATION_ICON_SELECTOR=".js-notification-icon",NOTIFICATION_ICON_ACTIVE_CLASS="rd__icon--notifications--active",notificationsTriggerEl,notificationsContentContainerEl,notificationsScrollContainerEl,seed,lastSeenAt,isLoading=!1,isLastPage=!1,page=1;return UTIL.ready(init),{setLastPage:setLastPage,setLastSeenAt:setLastSeenAt,setSeed:setSeed}}();!function(){function e(){document.querySelector(".js-photo-predictions .photos")&&PhotoGrid.init(".js-photo-predictions .photos")}UTIL.ready(e)}();var PhotoHelpers=function(){function e(e){return void 0===e&&(e=window.location.pathname),null!=e.match(r)}function t(e){var t=window.history.state;return null==t?null:"string"==typeof e?t[e]:t}function n(){var e=window.innerHeight,t=window.innerWidth;return e<681||t<1281?650:Math.min(750,e-70)}function o(){var e=window.innerHeight,t=window.innerWidth;return e<681||t<1281?940:1260}var r=/^\/photo|de\/foto\//;return{getState:t,getMaxHeight:n,getMaxWidth:o,isPhotoPath:e}}(),PhotoZoom=function(){function n(l){return function(e){var t=l.attrs.bounds,n=null==e.touches?e:e.touches[0],o=n.clientX,r=n.clientY;if(n!==e){e.preventDefault();var i=c(-(l.state.startX-o)/t.width),a=c(-(l.state.startY-r)/t.height);return l.state.offsetX=s(l.state.startOffsetX-i),void(l.state.offsetY=s(l.state.startOffsetY-a))}l.state.offsetX=s(c((o-t.left)/t.width)),l.state.offsetY=s(c((r-t.top)/t.height))}}function o(t){return function(e){t.state.startX=e.touches[0].clientX,t.state.startY=e.touches[0].clientY,t.state.startOffsetX=t.state.offsetX,t.state.startOffsetY=t.state.offsetY}}function r(o,r,i){function e(e){e.preventDefault(),e.stopPropagation(),document.addEventListener("click",a);var t=null==e.touches?e:e.touches[0],n=o.getAttribute("data-zoom-src");m.mount(r,{view:function(){return m(d,{bounds:o.getBoundingClientRect(),placeholderSrc:o.currentSrc,prefix:i&&i.prefix,x:t.clientX,y:t.clientY,zoomSrc:n})}}),Track.event("photo-zoom","in",l(n))}function a(){document.removeEventListener("click",a),m.mount(r,null),Track.event("photo-zoom","out",l(o.getAttribute("data-zoom-src")))}o.addEventListener("click",e)}function e(e,t){null==e&&(e=document);var n=e.querySelector(".js-photo-zoom"),o=e.querySelector(".js-photo-zoom-target");n&&r(n,o,t)}function l(e){if(null==e)return"";var t=f.exec(e);return t&&t[1]?t[1]:""}function c(e){return 100*e}function s(e){return Math.min(100,Math.max(0,e))}UTIL.ready(e);var i=3,a=831,u={view:function(e){var t=e.attrs,n=null==t.prefix?".page-wrap ":t.prefix;return m("style",[n+".image-section__content { overflow: hidden; opacity: 0.85; }",n+".image-section__zoom,",n+".image-section__zoom__target {","  display: block;","  background-size: "+t.width+"px "+t.height+"px;","  background-position: "+t.offsetX+"% "+t.offsetY+"%;",window.innerWidth<a?"height: "+t.height/i+"px;":"","}",n+".image-section__zoom {",'  background-image: url("'+t.placeholderSrc+'");',"}",n+".image-section__zoom__target {",null==t.zoomSrc?"":'  background-image: url("'+t.zoomSrc+'");',"}"])}},d={offsetX:0,offsetY:0,height:0,width:0,oninit:function(e){var t=e.attrs.bounds;e.state.height=t.height*i|0,e.state.width=t.width*i|0,e.state.offsetX=s(c((e.attrs.x-t.left)/t.width)),e.state.offsetY=s(c((e.attrs.y-t.top)/t.height)),e.state.onMove=n(e),e.state.onTouch=o(e)},view:function(e){var t=e.attrs,n=e.state;return[m(".image-section__zoom__target.absolute",{onmousemove:n.onMove,ontouchmove:n.onMove,ontouchstart:n.onTouch}),m(u,{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY,prefix:t.prefix,placeholderSrc:t.placeholderSrc,zoomSrc:t.zoomSrc})]}},f=/photos\/(.+)\//;return{init:e}}(),PhotoDetails=function(){function init(){var els=document.querySelectorAll(".js-insert-details");Array.prototype.forEach.call(els,function(el){if(el&&!el.getAttribute("data-initialized")){el.setAttribute("data-initialized","true");var path=el.getAttribute("data-details-path");if(performance.navigation.type!==performance.navigation.TYPE_RELOAD&&performance.navigation.type!==performance.navigation.TYPE_BACK_FORWARD){var refQuery=Analytics.getSearchQueryFromReferrer();null!==refQuery&&(path+="?ref_query="+refQuery)}var request=UTIL.scriptRequest(path);request.onload=function(){eval(request.responseText),ConfirmDialog.init()},request.send()}})}return UTIL.ready(init),{init:init}}(),PhotoModal=function(){function t(){if(v()&&null!=f()){var n=window.location.pathname;UTIL.getRequest(window.location.pathname+"modal",function(e){if(n===window.location.pathname){var t=window.history.state;t.html=e,t.step=c,window.history.replaceState(t,window.title,n),m.redraw()}},console.log)}}function n(e){if(e){var t=e.parentNode;rowGrid(t.querySelector(".photos"),d),TrackLinks.bindEvents(t.querySelectorAll("a[data-track-label], button[data-track-label]")),CarbonAds.init(t.querySelector(".carbon-ad")),SponsoredPhotos.init(t),PhotoZoom.init(t,{prefix:".modal "})}CustomDownload.init(),Download.init(),Dropdown.init(),PhotoDetails.init(),SocialScripts.init(),BuySellAds.init(),CopyText.init(),UTIL.triggerEvent("new-photos")}function o(e,t){null!=e&&(t=isNaN(t)?0:t,"function"==typeof e.scroll?e.scroll(0,t):e.scrollTop=t)}function e(){var e=document.querySelector(s);if(c+=1,a)return o(e,0),m.redraw(),!1;m.mount(document.querySelector(u),S),UTIL.addClass(document.body,"has-open-modal--page"),a=!0,window.requestAnimationFrame(function(){0!==e.scrollTop&&o(e,0)})}function r(){if(UTIL.hasClass(document.querySelector(".js-sign-up-modal"),"is-open")||UTIL.hasClass(document.querySelector(".js-collection-modal"),"is-open"))return!1;var e=document.querySelector(u);if(m.mount(e,null),e.innerHTML="",0!==c){var t=c;if(f("step")!==t)window.history.pushState({},w,y);else{l=!0,window.history.go(-1*t);var n=f()||{},o=window.document.title,r=window.location.pathname;window.history.go(t),l=!1,window.history.pushState(n,o,r)}}UTIL.removeClass(document.body,"has-open-modal--page"),window.setTimeout(function(){rowGrid(document.querySelector("[data-row-grid]"))},0),c=0,a=!1}function i(e){l||(v()?g&&y===window.location.pathname?a&&(c=0,b.close()):a?(e.state&&!isNaN(e.state.step)&&(c+=e.state.step-c),m.redraw()):b.open():g?window.location.reload():a&&(c=0,b.close()),Track.page())}var a=!1,l=!1,c=0,s=".js-photo-modal",u=s+" .modal__content",d={minMargin:10,maxMargin:10,itemSelector:".photo-item",firstItemClass:"first-item",lastRowClass:"last-row",resize:!0,minWidth:426},f=PhotoHelpers.getState,p=PhotoHelpers.getMaxHeight,h=PhotoHelpers.getMaxWidth,v=PhotoHelpers.isPhotoPath,g=v(),y=window.location.pathname,w=window.document.title,S={current:"",initialized:"",oninit:function(e){e.state.current=window.location.pathname,t()},oncreate:function(e){null!=f("html")&&window.requestAnimationFrame(function(){e.state.initialized=e.state.current,n(e.dom)})},onupdate:function(e){e.state.current!==window.location.pathname&&(e.state.current=window.location.pathname),null==f("html")?t():e.state.initialized!==e.state.current&&(e.state.initialized=e.state.current,n(e.dom))},view:function(){var e=f();if(null==e)return null;var t=e.photoHeight/e.photoWidth,n=(100*t|0)+"%",o=p(),r=Math.min(h(),o/t)+"px";if(null!=e.html)return[m("style",[".image-section__photo-wrap { width: 100%; max-width: "+r+"; }",".image-section__photo-wrap-width { height: 0; padding-bottom: "+n+"; }",".image-section__photo-wrap .image-section__image, .image-section__thumb { display: block; position: absolute; height: 100%; width: 100%; }"]),m.trust(e.html)];var i=650===o?e.photoLarge:e.photoBig;return[m("section.image-section",[m(".image-section__content",[m(".image-section__preview",{style:{maxWidth:r}},[m(".image-section__preview__wrap",{style:{paddingBottom:n,background:e.photoBg}},[e.photoThumb&&m("img.image-section__image",{src:e.photoThumb}),i&&m("img.image-section__image",{src:i})])])]),m(".image-section__sidebar")]),m(".photo-details",{style:"height: 400px"})]}},b=ModalInitializer({selector:s,onOpen:e,onClose:r});return window.addEventListener("popstate",i),b}();!function(){function e(){!isNaN(window.devicePixelRatio)&&1<window.devicePixelRatio&&(i=!0),document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-photo-link");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function r(e,t){if(!e||!i)return e;t=void 0===t?2:t;var n=e.split(/[?&]/),o=n.shift();return n.push("dpr=2"),o+"?"+n.sort().join("&")}function n(e){if(!e||!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){e.stopPropagation(),e.preventDefault();for(var t=e.target;"a"!=t.tagName.toLowerCase();)t=t.parentNode;var n=t.querySelector("img"),o={photoBg:n.style.background,photoBig:r(n.getAttribute("data-big-src")),photoLarge:r(n.getAttribute("data-large-src")),photoThumb:r(n.src,1),photoHeight:n.height,photoWidth:n.width};window.history.pushState(o,n.title,t.pathname),PhotoModal.open(),Track.page()}}var i=!0;UTIL.ready(e)}(),function(){function e(){var e=document.querySelector(".js-32bit-warning");e&&"Win32"===navigator.platform&&-1===navigator.userAgent.indexOf("WOW64")&&-1===navigator.userAgent.indexOf("Win64")&&-1===navigator.userAgent.indexOf(" x64")&&"x64"!==navigator.cpuClass&&UTIL.removeClass(e,"hidden")}UTIL.ready(e)}();var SocialScripts=function(){function e(){t()}function t(){var e,t,n,o,r;document.querySelector(".fb-like")&&(i?window.FB&&window.FB.XFBML&&window.FB.XFBML.parse():(i=!0,e=document,t="script",n="facebook-jssdk",r=e.getElementsByTagName(t)[0],e.getElementById(n)||((o=e.createElement(t)).id=n,o.async=1,o.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=248395878694096",r.parentNode.insertBefore(o,r))))}var i=!1;return e(),{init:e}}();!function(){function e(){l=document.querySelector(".switch-locale");for(var e=document.querySelectorAll(".js-show-switch-locale"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault(),r(!0)});var n=a(navigator.language||navigator.userLanguage);if(n!=a(UTIL.getLocale())&&i().includes(n)){var o=new Date(localStorage.getItem("hide_switch_locale_until"));l&&(!o||o<new Date)&&r(!1)}}function r(e){UTIL.addClass(l,"switch-locale--is-visible"),e?(UTIL.removeClass(l,"switch-locale--bottom-bar"),UTIL.addClass(l,"switch-locale--modal")):(UTIL.removeClass(l,"switch-locale--modal"),UTIL.addClass(l,"switch-locale--bottom-bar")),o||(t(),o=!0)}function t(){var e=document.querySelectorAll(".js-switch-locale-btn");Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(){n(e)})})}function n(e){e.getAttribute("data-close")&&UTIL.removeClass(l,"switch-locale--is-visible");var t=new Date;t.setDate(t.getDate()+90),localStorage.setItem("hide_switch_locale_until",t)}function i(){var t=[],e=document.querySelectorAll(".js-switch-locale-btn[hreflang]");return Array.prototype.forEach.call(e,function(e){t.push(a(e.getAttribute("hreflang")))}),t}function a(e){return e.split("-")[0]}var l,o=!1;UTIL.ready(e)}(),function(){function n(e){CookieConsent.setCountry(e)}var o="cc",e=localStorage.getItem(o);null===e?(country_url="/me/user-cc/",UTIL.getRequest(country_url,function(e){var t=JSON.parse(e).country;null!=t&&(localStorage.setItem(o,btoa(t)),n(t))},function(){})):n(atob(e))}();var TagEditor=function(){function e(){if(null==window.TagEditorScript){var e=document.createElement("script");e.src="/assets/tag-editor-58a04d22c34bbad1f479c90585e53e6aa12c1b342ce1361a0bc90c78801023d0.js",document.body.appendChild(e)}else TagEditorScript.init()}return{load:e}}(),AddPhotoTags=function(){function e(){var e=document.querySelectorAll(".js-add-tags-link");Array.prototype.forEach.call(e,function(e,t){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),n(e,t))})}function n(e,o){function t(e){e.preventDefault(),n(),TagEditor.load(),i.addEventListener("submit",r)}function n(){UTIL.addClass(e,"hidden"),UTIL.removeClass(i,"hidden")}function r(e){e.preventDefault();var t=document.querySelectorAll(".js-add-tags-success")[o];UTIL.addClass(i,"hidden"),UTIL.removeClass(t,"hidden");var n=$(this).attr("action");$.ajax({type:"POST",url:n,data:$(i).serialize()})}var i=document.querySelectorAll(".js-add-tags-form")[o];e.addEventListener("click",t)}return{init:e}}();!function(){function e(){l=document.querySelector(".avatar-form"),c=document.querySelector(".js-avatar-input"),s=document.querySelector(".avatar-form__img"),d=document.querySelector(".avatar-form__progress-bar"),f=document.querySelector(".avatar-form__btn"),null!==c&&null!==l&&(f.addEventListener("click",t),s.addEventListener("click",t),c.addEventListener("change",function(){file=c.files[0],n()}))}function t(e){e.preventDefault(),c.click()}function n(){m=!1,l.classList.add("avatar-form--uploading"),window.onbeforeunload=function(){if(!m)return i18n("avatar_not_published")};var e=new FileReader;e.onload=function(e){s.setAttribute("src",e.target.result)},e.readAsDataURL(file),o()}function o(){var e=function(e){e=JSON.parse(e);u=e.file_name,r(e.fields,e.upload_url)},t=function(e){e=JSON.parse(e)||{},alert(e.error||i18n("no_upload_url"))};UTIL.getRequest("/users/avatar_upload_url/?file_type="+file.type,e,t)}function r(e,t){var n=new XMLHttpRequest;n.upload.addEventListener("progress",i),n.open("POST",t),n.setRequestHeader("X-CSRF-Token",UTIL.getCsrfToken()),n.onload=function(){200<=n.status&&n.status<400&&a()},n.onerror=function(){alert(i18n("upload_error"))};var o=new FormData;for(key in e)o.append(key,e[key]);o.append("file",file),n.send(o)}function i(e){if(e.lengthComputable){var t=e.loaded/e.total*100;d.style.width=t+"%"}}function a(){var e=function(e){var t;(m=!0,l.classList.remove("avatar-form--uploading"),e=JSON.parse(e),s.setAttribute("src",e.avatar_url),t=localStorage.user)&&((t=JSON.parse(t)).avatar=e.avatar_url,localStorage.user=JSON.stringify(t))},t=function(){alert(i18n("try_again"))};UTIL.getRequest("/users/avatar_upload_success/?file_name="+u,e,t)}var l,c,s,u,d,f,m=!1;UTIL.ready(e)}();var ConfirmDialog=function(){function e(){var e=document.querySelectorAll("[data-confirm]");Array.prototype.forEach.call(e,function(e){e&&!e.getAttribute("data-initialized")&&(e.addEventListener("click",t),e.setAttribute("data-initialized","true"))})}function t(e){window.confirm(e.target.getAttribute("data-confirm"))||e.preventDefault()}return UTIL.ready(e),{init:e}}();!function(){function e(){(r=document.querySelector(".js-delete-account"))&&r.addEventListener("click",t)}function t(e){e.preventDefault();var t=r.getAttribute("data-confirm-text");if(window.confirm(t)){var n="/me/delete/",o=new XMLHttpRequest;o.open("DELETE",n,!0),o.setRequestHeader("X-CSRF-Token",UTIL.getCsrfToken()),o.send(),o.onload=function(){4==o.readyState&&"200"==o.status?(alert("Your account is deleted!"),Logout.logout(),window.location.replace("/")):alert("Your account couldn't be deleted! Please contact hello@pexels.com.")}}}var r;UTIL.ready(e)}();var GeoAutocompleteLoadScript=function(){function e(e){if(o)return!0;var t=document.documentElement.lang,n=document.createElement("script");return n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJ0gSv0MjwjHtRwrcoeNowjNdm3N-AWDU&libraries=places&callback="+e+"&language="+t,document.body.appendChild(n),!(o=!0)}var o=!1;return{load:e}}(),GeoAutocompleteForm=function(){function e(){var e=document.querySelectorAll(".js-show-geo-autocomplete"),o=document.querySelectorAll(".js-add-location-form");Array.prototype.forEach.call(e,function(t,n){t.getAttribute("data-initialized")||(t.setAttribute("data-initialized","true"),t.addEventListener("click",function(e){e.preventDefault(),UTIL.addClass(t,"hidden"),UTIL.removeClass(o[n],"hidden"),r()}))})}function r(){var e="GeoAutocompleteForm.handleAutocompleteLoaded";GeoAutocompleteLoadScript.load(e)&&t()}function t(){var e=document.querySelectorAll(".js-add-location-form");Array.prototype.forEach.call(e,function(e){if(!e.getAttribute("data-initialized")){e.setAttribute("data-initialized","true");var t=e.querySelector(".js-geo-autocomplete"),n=new GeoAutocomplete(t);e.addEventListener("submit",o(n,e))}})}function o(e,t){return function(){t.querySelector(".js-geo-autocomplete-place-id").value=e.getPlaceId(),t.querySelector(".js-geo-autocomplete-longitude").value=e.getLongitude(),t.querySelector(".js-geo-autocomplete-latitude").value=e.getLatitude()}}return{init:e,handleAutocompleteLoaded:t}}(),GeoAutocompleteProfile=function(){function e(){if(r=document.querySelector(".js-geo-autocomplete-profile-input")){var e="GeoAutocompleteProfile.isLoaded";GeoAutocompleteLoadScript.load(e)}}function t(){o=new GeoAutocomplete(r,{types:["(cities)"]}),document.querySelector(".js-geo-autocomplete-profile-form").addEventListener("submit",n)}function n(){document.querySelector(".js-geo-autocomplete-place-id").value=o.getPlaceId(),document.querySelector(".js-geo-autocomplete-longitude").value=o.getLongitude(),document.querySelector(".js-geo-autocomplete-latitude").value=o.getLatitude()}var o,r;return e(),{isLoaded:t}}(),GeoAutocomplete=function(e,n){function t(){UTIL.removeClass(e,"hidden");var t=new google.maps.places.Autocomplete(e,n);t.addListener("place_changed",function(){var e=t.getPlace();i=e.place_id,o=e.geometry.location.lat(),r=e.geometry.location.lng()})}var o,r,i;return t(),{getLatitude:function(){return o},getLongitude:function(){return r},getPlaceId:function(){return i}}};!function(){function e(){var e=document.querySelector(".js-anonymous-id");if(e){var t=Analytics.getAnonymousId();e.value=t}var n=document.querySelector(".js-anonymous-id-link");if(n){t=Analytics.getAnonymousId();n.href+="&anonymous_id="+t}}UTIL.ready(e)}();var Logout=function(){function e(){var e=document.querySelector(".js-logout-btn");e&&e.addEventListener("click",t)}function t(){localStorage.removeItem("followings"),localStorage.removeItem("followings_expire_at"),localStorage.removeItem("likes"),localStorage.removeItem("likes_expire_at"),localStorage.removeItem("collected"),localStorage.removeItem("collected_expire_at"),localStorage.removeItem("user"),n("pexels_auth"),n("avatar_url")}function n(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}return UTIL.ready(e),{logout:t}}();!function(){function e(){(o=document.querySelector(".js-newsletter-checkbox"))&&UTIL.getRequest("/me/newsletter-subscription-status/",t,n)}function t(e){(isSubscribed="true"==e,isSubscribed)&&(document.getElementById("user_subscribed_newsletter_before").value=!0,o.checked=!0,localStorage.setItem("newsletterSubscribed","true"))}function n(){}var o;e()}();var PhotoUpload=function(l,o){function e(){p=0==l.type.indexOf("video/")?"video":"photo",f=document.querySelector(".js-photo-upload-list"),Promise.all([t(),n()]).then(function(e){return r(e[1])}).then(function(){return s()}).then(function(){E=!0,u(T),o()})["catch"](d)}function t(){return new Promise(function(r,i){var e=document.createElement("div");e.innerHTML=document.querySelector("#js-photo-upload-item").innerHTML.replace(/{{randomNumber}}/g,Math.floor(9999999*Math.random())),(y=e.firstElementChild).querySelector("img").setAttribute("alt",l.name),f.insertBefore(y,f.firstChild),UTIL.triggerEvent("init-tag-editor"),Dropdown.init();var t=y.querySelector(".js-geo-autocomplete");_=new GeoAutocomplete(t),w=y.querySelector(".upload-item__progress-bar"),S=y.querySelector(".upload-item__progress-text"),b=S.getAttribute("data-uploading"),L=S.getAttribute("data-error"),T=S.getAttribute("data-success"),abortBtn=y.querySelector(".upload-item__abort"),abortBtn.addEventListener("click",function(){A=!0,o(),a(y)}),y.querySelector(".js-filename").innerHTML=l.name;var n=new FileReader;n.onload=function(e){var t;if("photo"===p)(t=y.querySelector("img.upload-item__preview")).onload=function(){h=this.naturalWidth,v=this.naturalHeight,g=l.size,h*v<C?i(i18n("min_resolution")):r()},t.setAttribute("src",e.target.result);else{var n=y.querySelectorAll(".js-photo-upload-only");Array.prototype.forEach.call(n,function(e){UTIL.addClass(e,"hidden")});var o=y.querySelectorAll(".js-video-upload-only");Array.prototype.forEach.call(o,function(e){UTIL.removeClass(e,"hidden")}),(t=y.querySelector("img.upload-item__preview")).setAttribute("src","/assets/submit-photos/video-upload-d9f1e124bc69421f36e30bd31cdf064e86d40b1bb9db3c52acc623b38ccefedc.png"),g=l.size,r()}UTIL.removeClass(t,"hidden")},n.readAsDataURL(l)})}function a(e){var t=e.offsetHeight,n=t/15;e.style.overflow="hidden";var o=function(){e.style.height=(t-=n)+"px",0<t?setTimeout(o,20):e.style.display="none"};o()}function n(){return new Promise(function(t,n){var e=function(e){e=JSON.parse(e);m=e.medium_id,t(e)},o=function(e){e=JSON.parse(e)||{},n(e.error||i18n("no_upload_url"))},r="/upload/upload_url/?file_type="+l.type+"&"+Math.floor(1e5*Math.random())+"&size="+l.size;UTIL.getRequest(r,e,o)})}function r(a){return new Promise(function(e,t){var n=a.fields,o=a.upload_url,r=new XMLHttpRequest;r.upload.addEventListener("progress",c),r.open("POST",o),r.setRequestHeader("X-CSRF-Token",UTIL.getCsrfToken()),r.onload=function(){200<=r.status&&r.status<400&&e()},r.onerror=function(){t(i18n("upload_error"))};var i=new FormData;for(key in n)i.append(key,n[key]);i.append("file",l),r.send(i)})}function c(e){e.lengthComputable&&i(e.loaded,e.total)}function i(e,t){var n=e/t*100;w.style.width=n+"%",u(b.replace("{{percent}}",Math.round(n)+"%"))}function s(){return new Promise(function(e,t){var n=function(){t(i18n("try_again"))},o="?id="+m+"&width="+h+"&height="+v+"&filesize="+g;UTIL.getRequest("/upload/success/"+o,e,n)})}function u(e){S.innerHTML=e}function d(e){A=!0,u(e||L),o(),UTIL.addClass(y,"upload-item--error")}var f,m,p,h,v,g,y,w,S,b,L,T,_,A=!1,E=!1,C=4e6;return e(),{isSuccessful:function(){return E},isAborted:function(){return A},getMediumId:function(){return m},getTags:function(){return y.querySelector(".js-tag-editor").value},getChallengeIds:function(){var e=y.querySelectorAll(".js-challenge"),t=[];return Array.prototype.forEach.call(e,function(e){e.checked&&t.push(e.value)}),t},getLatitude:function(){return _.getLatitude()},getLongitude:function(){return _.getLongitude()},getPlaceId:function(){return _.getPlaceId()}}};!function(){function e(){if(c=document.querySelector(".js-file-input"),s=document.querySelector(".dragover-overlay"),u=document.querySelector(".js-submit-btn"),d=document.querySelector(".js-submit-btn-tooltip"),f=document.querySelector(".js-submit-form"),m=document.querySelector(".js-submit-photos"),null!==c&&null!==s&&null!==u&&null!==f)if(t()){if(MobileAppBanner.show("upload")&&window.setTimeout(function(){MobileAppBanner.hide()},16e3),"undefined"==typeof Promise){var e=document.createElement("script");e.src="/assets/es6-promise-1dfe9ec863547182428a11afd37a04319817c8967f25b18c15399a51a384774a.js",document.body.appendChild(e)}TagEditor.load(),c.addEventListener("change",function(){i(c.files)}),document.addEventListener("dragover",n),document.addEventListener("dragleave",n),document.addEventListener("drop",r),f.addEventListener("submit",l)}else alert("Houston, we have a problem. Please use a modern browser to upload photos.")}function t(){var e=new XMLHttpRequest;return!!(e&&"upload"in e&&"onprogress"in e.upload&&window.FileList)}function n(e){e.stopPropagation(),e.preventDefault(),o(e)?(e.dataTransfer.dropEffect="copy","dragover"==e.type?s.style.display="block":e.target==s&&(s.style.display="none")):e.dataTransfer.dropEffect="none"}function o(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1}function r(e){n(e),i(e.target.files||e.dataTransfer.files)}function i(e){if(0!=e.length){d.removeAttribute("data-tooltip-disabled"),u.setAttribute("disabled","disabled"),window.onbeforeunload=function(){if(!p)return i18n("photos_not_published")};for(var t=0;t<e.length;t++){var n=new PhotoUpload(e[t],a);h.push(n)}}}function a(){for(var e=0;e<h.length;e++)if(!h[e].isSuccessful()&&!h[e].isAborted())return;d.setAttribute("data-tooltip-disabled","disabled"),u.removeAttribute("disabled")}function l(){p=!0;for(var e=[],t=0;t<h.length;t++)h[t].isSuccessful()&&!h[t].isAborted()&&e.push({id:h[t].getMediumId(),tags:h[t].getTags(),challenge_ids:h[t].getChallengeIds(),latitude:h[t].getLatitude(),longitude:h[t].getLongitude(),google_place_id:h[t].getPlaceId()});m.value=JSON.stringify(e)}var c,s,u,d,f,m,p=!1,h=[];UTIL.ready(e)}();